---
import { Image } from "astro:assets";
import EstudiantesBachillerato from "@/assets/imagenes/CardsNiveles/bachillerato_en_linea.webp";
import EstudiantesLicenciaturas from "@/assets/imagenes/CardsNiveles/licenciaturas.webp";
import EstudiantesMaestrias from "@/assets/imagenes/CardsNiveles/maestrias_en_linea.webp";
---

<section class="bg-white py-8 md:py-16 px-4 sm:px-6 lg:px-8">
  <div class="max-w-7xl mx-auto">
    <!-- Navegación de tabs -->
    <div
      class="flex flex-wrap gap-2 md:gap-4 justify-center md:justify-start mb-8"
    >
      <button
        class="tab-button px-4 py-2 rounded-full bg-blue-600 text-white font-medium"
        data-tab="bachillerato"
        aria-label="Ver información de Bachillerato en línea"
      >
        Bachillerato
      </button>
      <button
        class="tab-button px-4 py-2 rounded-full border border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors"
        data-tab="licenciatura"
        aria-label="Ver información de Licenciaturas en línea"
      >
        Licenciatura
      </button>
      <button
        class="tab-button px-4 py-2 rounded-full border border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors"
        data-tab="maestria"
        aria-label="Ver información de Maestrías en línea"
      >
        Maestría
      </button>
    </div>

    <!-- Contenido principal -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12 items-start">
      <!-- Columna izquierda: Imagen y título -->
      <div class="order-1">
        <!-- Título visible solo en mobile -->
        <h2
          id="mobile-title"
          class="text-3xl font-bold text-gray-900 mb-6 lg:hidden text-center"
        >
          Bachillerato en línea
        </h2>

        <!-- Contenedor de imagen con todas las imágenes precargadas -->
        <div class="relative overflow-hidden rounded-2xl shadow-lg">
          <Image
            id="image-bachillerato"
            src={EstudiantesBachillerato}
            alt="Estudiantes de bachillerato en línea UNE - Educación virtual de calidad"
            class="w-full h-auto object-cover transition-opacity duration-300"
            loading="eager"
            widths={[400, 600, 800]}
            sizes="(max-width: 1024px) 100vw, 50vw"
          />
          <Image
            id="image-licenciatura"
            src={EstudiantesLicenciaturas}
            alt="Estudiantes de licenciatura en línea UNE - Programas profesionales virtuales"
            class="w-full h-auto object-cover transition-opacity duration-300 hidden"
            loading="lazy"
            widths={[400, 600, 800]}
            sizes="(max-width: 1024px) 100vw, 50vw"
          />
          <Image
            id="image-maestria"
            src={EstudiantesMaestrias}
            alt="Estudiantes de maestría en línea UNE - Posgrados virtuales de excelencia"
            class="w-full h-auto object-cover transition-opacity duration-300 hidden"
            loading="lazy"
            widths={[400, 600, 800]}
            sizes="(max-width: 1024px) 100vw, 50vw"
          />
        </div>
      </div>

      <!-- Columna derecha: Información -->
      <div class="order-2">
        <!-- Título visible solo en desktop -->
        <h2
          id="desktop-title"
          class="text-4xl font-bold text-gray-900 mb-4 hidden lg:block"
        >
          Bachillerato en línea
        </h2>

        <!-- Subtítulo modalidad virtual -->
        <p class="text-blue-600 font-medium mb-6 text-center lg:text-left">
          100% en línea
        </p>

        <!-- Descripción -->
        <p
          id="description"
          class="text-gray-600 mb-8 text-center lg:text-left leading-relaxed"
        >
          Bachillerato completamente virtual con tecnología educativa digital y
          certificación oficial UDG
        </p>

        <!-- Lista de beneficios -->
        <div id="benefits-list" class="space-y-4 mb-8">
          <!-- Se llenará dinámicamente -->
        </div>

        <!-- Botón CTA desktop -->
        <div class="hidden lg:block">
          <button
            id="desktop-cta-button"
            class="bg-red-500 hover:bg-red-600 text-white font-medium px-6 py-3 rounded-lg transition-colors"
            aria-label="Conoce todos los detalles del programa"
          >
            Conoce todos los detalles
          </button>
        </div>
      </div>
    </div>

    <!-- Botón CTA mobile -->
    <div class="lg:hidden mt-8 text-center">
      <button
        id="mobile-cta-button"
        class="bg-red-500 hover:bg-red-600 text-white font-medium px-8 py-3 rounded-lg transition-colors w-full max-w-xs"
        aria-label="Conoce todos los detalles del programa"
      >
        Conoce todos los detalles
      </button>
    </div>
  </div>
</section>

<script>
  // Datos de contenido para cada sección (100% en línea)
  const contentData = {
    bachillerato: {
      title: "Bachillerato en línea",
      route: "/oferta-academica/bachillerato",
      description:
        "Bachillerato completamente virtual con tecnología educativa digital y certificación oficial UDG",
      benefits: [
        "Certificación oficial UDG",
        "Plataforma educativa avanzada",
        "Flexibilidad total de horarios",
        "Tutorías virtuales personalizadas",
        "Recursos digitales interactivos",
        "Preparación para la era digital",
      ],
    },
    licenciatura: {
      title: "Licenciatura en línea",
      route: "/oferta-academica/licenciaturas",
      description:
        "Licenciaturas 100% en línea con validez oficial y la flexibilidad que necesitas para estudiar a tu ritmo",
      benefits: [
        "Título profesional con validez oficial",
        "Campus virtual con herramientas digitales",
        "Estudia desde cualquier lugar",
        "Acompañamiento académico personalizado",
        "Simuladores profesionales en línea",
        "Biblioteca digital especializada",
      ],
    },
    maestria: {
      title: "Maestría en línea",
      route: "/oferta-academica/maestrias",
      description:
        "Maestrías 100% virtuales con estándares internacionales y máxima flexibilidad para profesionistas",
      benefits: [
        "Grado de maestría con validez oficial",
        "Plataforma de posgrado avanzada",
        "Seminarios virtuales especializados",
        "Asesoría de tesis en línea",
        "Acceso a bases de datos científicas",
        "Networking académico virtual",
      ],
    },
  };

  // Estado actual
  let activeTab = "bachillerato";

  // Función para crear el ícono de check
  function createCheckIcon() {
    return `
      <div class="w-5 h-5 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0">
        <svg class="w-3 h-3 text-white" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
        </svg>
      </div>
    `;
  }

  // Función para cambiar la imagen visible
  function updateImage(newTab: string) {
    const images = {
      bachillerato: document.getElementById("image-bachillerato"),
      licenciatura: document.getElementById("image-licenciatura"),
      maestria: document.getElementById("image-maestria"),
    };

    // Ocultar todas las imágenes
    Object.values(images).forEach((img) => {
      if (img) img.classList.add("hidden");
    });

    // Mostrar la imagen correspondiente
    const activeImage = images[newTab as keyof typeof images];
    if (activeImage) activeImage.classList.remove("hidden");
  }

  // Función para actualizar el contenido
  function updateContent() {
    const currentData = contentData[activeTab as keyof typeof contentData];

    // Actualizar títulos
    const mobileTitle = document.getElementById("mobile-title");
    const desktopTitle = document.getElementById("desktop-title");
    if (mobileTitle) mobileTitle.textContent = currentData.title;
    if (desktopTitle) desktopTitle.textContent = currentData.title;

    // Actualizar imagen
    updateImage(activeTab);

    // Actualizar descripción
    const description = document.getElementById("description");
    if (description) description.textContent = currentData.description;

    // Actualizar beneficios
    const benefitsList = document.getElementById("benefits-list");
    if (benefitsList) {
      benefitsList.innerHTML = "";
      currentData.benefits.forEach((benefit: string) => {
        const div = document.createElement("div");
        div.className = "flex items-center gap-3";
        div.innerHTML = `
          ${createCheckIcon()}
          <span class="text-gray-700">${benefit}</span>
        `;
        benefitsList.appendChild(div);
      });
    }

    // Actualizar botones CTA con la ruta correcta
    const updateButton = (button: HTMLElement | null) => {
      if (button) {
        button.onclick = () => {
          window.location.href = currentData.route;
        };
      }
    };

    updateButton(document.getElementById("desktop-cta-button"));
    updateButton(document.getElementById("mobile-cta-button"));
  }

  // Función para cambiar tab
  function changeTab(newTab: string) {
    activeTab = newTab;

    // Actualizar estilos de botones
    document.querySelectorAll(".tab-button").forEach((btn) => {
      const button = btn as HTMLButtonElement;
      if (button.dataset.tab === newTab) {
        button.className =
          "tab-button px-4 py-2 rounded-full bg-blue-600 text-white font-medium";
      } else {
        button.className =
          "tab-button px-4 py-2 rounded-full border border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors";
      }
    });

    updateContent();
  }

  // Inicializar
  document.addEventListener("DOMContentLoaded", function () {
    // Event listeners para tabs
    document.querySelectorAll(".tab-button").forEach((button) => {
      button.addEventListener("click", () => {
        const btn = button as HTMLButtonElement;
        if (btn.dataset.tab) {
          changeTab(btn.dataset.tab);
        }
      });
    });

    // Inicializar contenido
    updateContent();
  });
</script>

<style>
  .tab-button {
    transition: all 0.2s ease-in-out;
  }

  .tab-button:hover {
    transform: translateY(-1px);
  }

  /* Asegurar transiciones suaves entre imágenes */
  [id^="image-"] {
    position: relative;
  }
</style>
