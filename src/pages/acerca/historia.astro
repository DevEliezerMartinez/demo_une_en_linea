---
import Layout from "@/layouts/Layout.astro";
import Logo from "@assets/Logos/UNE_30.webp";
// Asumiendo que usar√°s un video que refleje tecnolog√≠a/estudiantes con laptops
import videoSrc from "@assets/Videos/comercial_noviembrev2.webm";
import Justicia from "@assets/imagenes/valores/Justicia.webp";
import Templanza from "@assets/imagenes/valores/Templanza.webp";
import Prudencia from "@assets/imagenes/valores/Prudencia.webp";
import Galeriadeplantele from "@/components/sections/historia/Galeriadeplantele.astro";
import Timeline from "@/components/sections/acerca/Timeline.astro";
---

<Layout
  title="Historia Virtual UNE - Pioneros en Educaci√≥n en L√≠nea"
  description="Conoce la evoluci√≥n digital de Universidad UNE. A√±os perfeccionando nuestra plataforma para ofrecerte educaci√≥n de calidad, flexible y sin fronteras."
>
  <main class="bg-white">
    <div class="relative min-h-[90vh] flex items-center overflow-hidden">
      <div class="absolute inset-0 z-0">
        <video
          id="uneVideo"
          class="w-full h-full object-cover"
          poster={Justicia.src}
          playsinline
          loop
          muted
        >
          <source src={videoSrc} type="video/mp4" />
        </video>
        <div
          class="absolute inset-0 bg-gradient-to-r from-white/95 via-white/80 to-transparent"
        >
        </div>
        <div
          id="loadingOverlay"
          class="absolute inset-0 z-20 flex items-center justify-center bg-gray-100 transition-opacity duration-500"
        >
          <div
            class="animate-spin rounded-full h-12 w-12 border-b-2 border-red-600"
          >
          </div>
        </div>
      </div>

      <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-center py-12">
          <div class="space-y-8">
            <img src={Logo.src} alt="Logo UNE" class="w-48 h-auto" />

            <div class="space-y-6">
              <h1
                class="text-4xl md:text-5xl font-bold text-gray-900 leading-tight"
              >
                De las aulas a la <br />
                <span class="text-azul-une">revoluci√≥n digital</span>
              </h1>
              <p
                class="text-gray-700 text-lg md:text-xl leading-relaxed max-w-lg"
              >
                Nuestra historia en l√≠nea no comenz√≥ ayer. Llevamos a√±os
                <span class="font-semibold text-red-600"
                  >rompiendo barreras geogr√°ficas</span
                >
                para llevar la excelencia acad√©mica hasta tu pantalla. Tecnolog√≠a
                con sentido humano.
              </p>
            </div>

            <div class="flex flex-wrap gap-4 pt-4">
              <a
                href="/acerca/modelo-educativo"
                class="bg-red-600 hover:bg-red-700 text-white font-bold py-4 px-8 rounded-full text-lg transition-all duration-300 transform hover:scale-105 hover:shadow-xl shadow-red-500/30"
              >
                DESCUBRE EL MODELO ONLINE
              </a>

              <div
                class="flex items-center gap-2 bg-white/50 backdrop-blur-md rounded-full px-4 py-2 border border-gray-200"
              >
                <button
                  id="playPauseBtn"
                  class="p-2 hover:text-azul-une transition-colors"
                >
                  <span id="playIcon" class="hidden">‚ñ∂</span>
                  <span id="pauseIcon">‚ùö‚ùö</span>
                </button>
                <button
                  id="muteBtn"
                  class="p-2 hover:text-azul-une transition-colors"
                >
                  <span id="muteIcon">üîá</span>
                  <span id="unmuteIcon" class="hidden">üîä</span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <section class="py-20 px-4">
      <div class="max-w-7xl mx-auto">
        <div class="grid lg:grid-cols-2 gap-16 items-center">
          <div class="relative order-2 lg:order-1">
            <div
              class="relative z-10 bg-gray-100 rounded-2xl p-2 shadow-xl rotate-1 hover:rotate-0 transition-transform duration-500"
            >
              <img
                src={Prudencia.src}
                alt="Evoluci√≥n de la plataforma UNE"
                class="w-full h-auto rounded-xl transition-all duration-500"
              />
            </div>
            <div
              class="absolute -bottom-6 -right-6 w-24 h-24 bg-dots-pattern opacity-50"
            >
            </div>
          </div>

          <div class="space-y-8 order-1 lg:order-2">
            <span
              class="text-red-600 font-bold tracking-widest text-sm uppercase"
              >Nuestra Evoluci√≥n</span
            >
            <h2 class="text-3xl lg:text-4xl font-bold mb-6 text-gray-900">
              M√°s que una plataforma,<br />una comunidad conectada
            </h2>

            <p class="text-lg lg:text-xl leading-relaxed text-gray-600 mb-8">
              Entendimos antes que nadie que el futuro de la educaci√≥n requer√≠a
              flexibilidad. Lo que comenz√≥ como una herramienta de apoyo, hoy es
              un ecosistema digital robusto que permite a miles de personas
              estudiar sin sacrificar su trabajo o familia.
            </p>

            <div class="grid sm:grid-cols-2 gap-8">
              <div class="flex items-start space-x-4">
                <div class="flex-shrink-0">
                  <div
                    class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center text-azul-une"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      class="h-6 w-6"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke="currentColor"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
                      ></path>
                    </svg>
                  </div>
                </div>
                <div>
                  <h4 class="font-bold text-gray-900">Tecnolog√≠a Intuitiva</h4>
                  <p class="text-sm text-gray-600 mt-1">
                    Plataformas dise√±adas para facilitar el aprendizaje, no para
                    complicarlo.
                  </p>
                </div>
              </div>

              <div class="flex items-start space-x-4">
                <div class="flex-shrink-0">
                  <div
                    class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center text-azul-une"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      class="h-6 w-6"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke="currentColor"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"
                      ></path>
                    </svg>
                  </div>
                </div>
                <div>
                  <h4 class="font-bold text-gray-900">Alcance Global</h4>
                  <p class="text-sm text-gray-600 mt-1">
                    Llevando la calidad UNE a cualquier rinc√≥n con internet.
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="bg-azul-une py-16 px-4 text-white relative overflow-hidden">
      <div class="absolute inset-0 opacity-10"></div>
      <div class="max-w-7xl mx-auto relative z-10">
        <div class="text-center mb-12">
          <h2 class="text-4xl lg:text-5xl font-bold mb-4">
            El impacto de nuestra aula virtual
          </h2>
          <p class="text-blue-100 text-lg">
            Cifras que respaldan la solidez de nuestro modelo online
          </p>
        </div>

        <div
          class="grid md:grid-cols-3 gap-8 mb-12 divide-y md:divide-y-0 md:divide-x divide-blue-800/50"
        >
          <div class="text-center px-4 py-4">
            <div
              class="text-5xl lg:text-6xl font-bold text-white mb-2 counter"
              data-target="15000"
            >
              +0
            </div>
            <h3 class="text-xl font-semibold text-cyan-400 mb-2">
              Clases Virtuales Impartidas
            </h3>
            <p class="text-blue-200 text-sm">
              Sesiones dise√±adas espec√≠ficamente para el entorno digital.
            </p>
          </div>

          <div class="text-center px-4 py-4">
            <div
              class="text-5xl lg:text-6xl font-bold text-white mb-2 counter"
              data-target="5000"
            >
              +0
            </div>
            <h3 class="text-xl font-semibold text-cyan-400 mb-2">
              Egresados Online
            </h3>
            <p class="text-blue-200 text-sm">
              Profesionales titulados trabajando en empresas l√≠deres.
            </p>
          </div>

          <div class="text-center px-4 py-4">
            <div
              class="text-5xl lg:text-6xl font-bold text-white mb-2 counter"
              data-target="24"
            >
              0
            </div>
            <h3 class="text-xl font-semibold text-cyan-400 mb-2">
              Horas de Acceso
            </h3>
            <p class="text-blue-200 text-sm">
              Tu campus est√° abierto los 7 d√≠as de la semana, todo el a√±o.
            </p>
          </div>
        </div>

        <div class="grid lg:grid-cols-2 gap-8 max-w-5xl mx-auto mt-16">
          <div
            class="bg-white/10 backdrop-blur-sm rounded-2xl p-8 border border-white/20"
          >
            <h3 class="text-2xl font-bold mb-4 flex items-center gap-2">
              <span class="text-3xl">üöÄ</span> VISI√ìN DIGITAL
            </h3>
            <p class="text-lg font-light leading-relaxed">
              Ser el referente en educaci√≥n en l√≠nea en M√©xico, eliminando las
              barreras de tiempo y espacio para que cualquier persona con
              determinaci√≥n pueda acceder a una formaci√≥n de excelencia.
            </p>
          </div>

          <div
            class="bg-white/10 backdrop-blur-sm rounded-2xl p-8 border border-white/20"
          >
            <h3 class="text-2xl font-bold mb-4 flex items-center gap-2">
              <span class="text-3xl">üéØ</span> MISI√ìN
            </h3>
            <p class="text-lg font-light leading-relaxed">
              Democratizar el conocimiento a trav√©s de la tecnolog√≠a, formando
              profesionales autogestivos, competentes digitalmente y
              comprometidos con su entorno.
            </p>
          </div>
        </div>
      </div>
    </section>

    <section class="bg-gray-50 py-20 px-4">
      <div class="max-w-7xl mx-auto">
        <div class="text-center mb-16">
          <h2 class="text-4xl lg:text-5xl font-bold text-gray-800 mb-6">
            Valores Humanistas en un Mundo Digital
          </h2>
          <p class="text-lg text-gray-600 max-w-4xl mx-auto leading-relaxed">
            La tecnolog√≠a cambia, pero nuestros principios permanecen. Adaptamos
            nuestros valores fundacionales para guiar al estudiante en el
            entorno virtual.
          </p>
        </div>

        <div class="space-y-12">
          <div
            class="bg-white rounded-3xl shadow-xl overflow-hidden hover:shadow-2xl transition-shadow duration-300"
          >
            <div class="grid lg:grid-cols-2 items-center">
              <div class="p-10 lg:p-14 order-2 lg:order-1">
                <h3 class="text-3xl font-bold text-azul-une mb-4">
                  Prudencia y √âtica Digital
                </h3>
                <p class="text-gray-600 text-lg leading-relaxed">
                  En el vasto mundo de internet, formamos estudiantes con
                  criterio. La prudencia en UNE significa saber discernir
                  informaci√≥n veraz, usar la tecnolog√≠a con responsabilidad y
                  actuar con √©tica profesional en entornos remotos.
                </p>
              </div>
              <div class="order-1 lg:order-2 overflow-hidden h-80">
                <img
                  src={Prudencia.src}
                  alt="Estudiante analizando informaci√≥n en computadora"
                  class="w-full h-full object-cover transform hover:scale-105 transition-transform duration-700"
                />
              </div>
            </div>
          </div>

          <div
            class="bg-white rounded-3xl shadow-xl overflow-hidden hover:shadow-2xl transition-shadow duration-300"
          >
            <div class="grid lg:grid-cols-2 items-center">
              <div class="order-1 overflow-hidden h-80">
                <img
                  src={Justicia.src}
                  alt="Diversidad de estudiantes conectados"
                  class="w-full h-full object-cover transform hover:scale-105 transition-transform duration-700"
                />
              </div>
              <div class="p-10 lg:p-14 order-2">
                <h3 class="text-3xl font-bold text-azul-une mb-4">
                  Justicia y Acceso Universal
                </h3>
                <p class="text-gray-600 text-lg leading-relaxed">
                  La educaci√≥n en l√≠nea es nuestra herramienta de justicia
                  social. Creemos que la educaci√≥n de calidad debe estar al
                  alcance de todos, sin importar d√≥nde vivan o sus horarios
                  laborales. La tecnolog√≠a iguala el terreno.
                </p>
              </div>
            </div>
          </div>

          <div
            class="bg-white rounded-3xl shadow-xl overflow-hidden hover:shadow-2xl transition-shadow duration-300"
          >
            <div class="grid lg:grid-cols-2 items-center">
              <div class="p-10 lg:p-14 order-2 lg:order-1">
                <h3 class="text-3xl font-bold text-azul-une mb-4">
                  Templanza y Autogesti√≥n
                </h3>
                <p class="text-gray-600 text-lg leading-relaxed">
                  Estudiar online requiere equilibrio. La templanza en UNE se
                  traduce en la capacidad de autogesti√≥n: equilibrar estudios,
                  trabajo y vida personal. Ense√±amos a nuestros alumnos a ser
                  due√±os de su tiempo.
                </p>
              </div>
              <div class="order-1 lg:order-2 overflow-hidden h-80">
                <img
                  src={Templanza.src}
                  alt="Persona trabajando en equilibrio"
                  class="w-full h-full object-cover transform hover:scale-105 transition-transform duration-700"
                />
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <Timeline />
  </main>
</Layout>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const video = document.getElementById("uneVideo");
    const playPauseBtn = document.getElementById("playPauseBtn");
    const muteBtn = document.getElementById("muteBtn");
    const playIcon = document.getElementById("playIcon");
    const pauseIcon = document.getElementById("pauseIcon");
    const muteIcon = document.getElementById("muteIcon");
    const unmuteIcon = document.getElementById("unmuteIcon");
    const loadingOverlay = document.getElementById("loadingOverlay");

    let isVideoReady = false;

    function updatePlayIcon() {
      if (video.paused) {
        playIcon.classList.remove("hidden");
        pauseIcon.classList.add("hidden");
      } else {
        playIcon.classList.add("hidden");
        pauseIcon.classList.remove("hidden");
      }
    }

    function updateMuteIcon() {
      if (video.muted) {
        muteIcon.classList.remove("hidden");
        unmuteIcon.classList.add("hidden");
      } else {
        muteIcon.classList.add("hidden");
        unmuteIcon.classList.remove("hidden");
      }
    }

    async function attemptAutoplay() {
      try {
        video.muted = true;
        await video.play();
        console.log("Video playing automatically");
        updatePlayIcon();
      } catch (error) {
        console.log("Autoplay blocked:", error);
      }
    }

    if (playPauseBtn) {
      playPauseBtn.addEventListener("click", () => {
        if (video.paused) {
          video.play();
        } else {
          video.pause();
        }
        updatePlayIcon();
      });
    }

    if (muteBtn) {
      muteBtn.addEventListener("click", () => {
        video.muted = !video.muted;
        updateMuteIcon();
      });
    }

    video.addEventListener("loadstart", () => {
      loadingOverlay.classList.remove("hidden");
    });

    video.addEventListener("canplay", () => {
      loadingOverlay.classList.add("hidden");
      isVideoReady = true;
      attemptAutoplay();
    });

    video.addEventListener("play", updatePlayIcon);
    video.addEventListener("pause", updatePlayIcon);
    video.addEventListener("volumechange", updateMuteIcon);

    video.addEventListener("error", (e) => {
      console.error("Video error:", e);
      loadingOverlay.classList.add("hidden");
    });

    updatePlayIcon();
    updateMuteIcon();

    setTimeout(() => {
      if (isVideoReady) {
        attemptAutoplay();
      }
    }, 500);

    document.addEventListener("visibilitychange", () => {
      if (document.hidden && !video.paused) {
        video.pause();
      }
    });

    // Animaci√≥n de contadores optimizada
    const counters = document.querySelectorAll(".counter");
    const animateCounters = () => {
      counters.forEach((counter) => {
        const targetAttr = counter.getAttribute("data-target");
        if (!targetAttr) return;

        const target = parseInt(targetAttr);
        const count = parseInt(
          counter.innerText
            .replace("+", "")
            .replace(",", "")
            .replace(" ", "") || "0",
        );

        // Ajuste de velocidad basado en el tama√±o del n√∫mero
        const speed = target > 1000 ? 50 : 200;
        const increment = Math.ceil(target / speed);

        if (count < target) {
          counter.innerText = "+" + (count + increment).toLocaleString();
          requestAnimationFrame(animateCounters); // M√°s suave que setTimeout
        } else {
          counter.innerText = "+" + target.toLocaleString();
        }
      });
    };

    const counterObserver = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            animateCounters();
            counterObserver.disconnect();
          }
        });
      },
      { threshold: 0.5 },
    ); // Disparar cuando el 50% del elemento sea visible

    counters.forEach((counter) => counterObserver.observe(counter));
  });
</script>

<style>
  /* Patr√≥n de puntos decorativo */
  .bg-dots-pattern {
    background-image: radial-gradient(#dc2626 1px, transparent 1px);
    background-size: 10px 10px;
  }

  #uneVideo {
    transition: opacity 0.5s ease;
  }
</style>
